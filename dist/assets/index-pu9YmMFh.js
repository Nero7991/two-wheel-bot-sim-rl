var t=Object.defineProperty,__name=(e,i)=>t(e,"name",{value:i,configurable:!0});__name(function polyfill(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(t);new MutationObserver(t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&processPreload(t)}).observe(document,{childList:!0,subtree:!0}),__name(getFetchOpts,"getFetchOpts"),__name(processPreload,"processPreload")}function getFetchOpts(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}function processPreload(t){if(t.ep)return;t.ep=!0;const e=getFetchOpts(t);fetch(t.href,e)}},"polyfill")();class TwoWheelBotRL{static{__name(this,"TwoWheelBotRL")}constructor(){this.canvas=null,this.ctx=null,this.webgpuDevice=null,this.isInitialized=!1,this.animationId=null,this.frameCount=0,this.lastFpsTime=performance.now(),this.fps=0,this.isTraining=!1,this.isPaused=!1,this.trainingStep=0,this.episodeCount=0,this.bestScore=0}async initialize(){try{this.showLoading(!0),this.initializeCanvas(),await this.initializeWebGPU(),this.initializeControls(),this.startRenderLoop(),this.isInitialized=!0}catch(t){this.showError("Failed to initialize application: "+t.message)}finally{this.showLoading(!1)}}initializeCanvas(){if(this.canvas=document.getElementById("simulation-canvas"),!this.canvas)throw new Error("Canvas element not found");if(this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("Failed to get 2D context");this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas())}async initializeWebGPU(){const t=document.getElementById("webgpu-text");try{if(!navigator.gpu)throw new Error("WebGPU not supported in this browser");t.textContent="Requesting WebGPU adapter...";const e=await navigator.gpu.requestAdapter();if(!e)throw new Error("No suitable WebGPU adapter found");t.textContent="Requesting WebGPU device...",this.webgpuDevice=await e.requestDevice(),t.textContent="WebGPU Available",t.className="status-available"}catch(e){t.textContent="WebGPU Unavailable (CPU fallback)",t.className="status-unavailable",this.webgpuDevice=null}}initializeControls(){document.getElementById("start-training").addEventListener("click",()=>{this.startTraining()}),document.getElementById("pause-training").addEventListener("click",()=>{this.pauseTraining()}),document.getElementById("reset-environment").addEventListener("click",()=>{this.resetEnvironment()}),document.getElementById("toggle-physics").addEventListener("click",()=>{}),document.getElementById("toggle-network").addEventListener("click",()=>{}),document.getElementById("toggle-metrics").addEventListener("click",()=>{}),document.getElementById("save-model").addEventListener("click",()=>{}),document.getElementById("load-model").addEventListener("click",()=>{}),document.getElementById("export-model").addEventListener("click",()=>{})}startTraining(){this.isTraining||(this.isTraining=!0,this.isPaused=!1,document.getElementById("start-training").disabled=!0,document.getElementById("pause-training").disabled=!1)}pauseTraining(){if(!this.isTraining)return;this.isPaused=!this.isPaused;document.getElementById("pause-training").textContent=this.isPaused?"Resume Training":"Pause Training"}resetEnvironment(){this.isTraining=!1,this.isPaused=!1,this.trainingStep=0,this.episodeCount=0,document.getElementById("start-training").disabled=!1,document.getElementById("pause-training").disabled=!0,document.getElementById("pause-training").textContent="Pause Training",this.updateUI()}resizeCanvas(){const t=document.getElementById("main-container"),e=document.getElementById("controls-panel"),i=t.clientWidth-e.clientWidth,n=t.clientHeight;this.canvas.width=Math.max(800,i-2),this.canvas.height=Math.max(600,n-2)}startRenderLoop(){const t=__name(e=>{this.update(e),this.draw(),this.updateFPS(e),this.animationId=requestAnimationFrame(t)},"render");this.animationId=requestAnimationFrame(t)}update(t){this.isTraining&&!this.isPaused&&(this.trainingStep++,this.trainingStep%1e3==0&&(this.episodeCount++,this.updateUI()))}draw(){this.ctx.fillStyle="#0a0a0a",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawPlaceholder()}drawPlaceholder(){const t=this.canvas.width/2,e=this.canvas.height/2;this.ctx.fillStyle="#00d4ff",this.ctx.fillRect(t-20,e-10,40,20),this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.ctx.arc(t-15,e+15,8,0,2*Math.PI),this.ctx.arc(t+15,e+15,8,0,2*Math.PI),this.ctx.fill(),this.ctx.fillStyle="#ffffff",this.ctx.font="16px Arial",this.ctx.textAlign="center",this.ctx.fillText("Two-Wheel Balancing Robot",t,e-40),this.ctx.fillText("Physics and ML modules will be implemented in next phases",t,e+60)}updateFPS(t){this.frameCount++,t-this.lastFpsTime>=1e3&&(this.fps=Math.round(1e3*this.frameCount/(t-this.lastFpsTime)),this.frameCount=0,this.lastFpsTime=t,document.getElementById("fps-counter").textContent=`FPS: ${this.fps}`)}updateUI(){document.getElementById("training-step").textContent=`Step: ${this.trainingStep.toLocaleString()}`,document.getElementById("episode-count").textContent=`Episode: ${this.episodeCount}`,document.getElementById("best-score").textContent=`Best Score: ${this.bestScore}`}showLoading(t){document.getElementById("loading").style.display=t?"flex":"none"}showError(t){alert("Error: "+t)}destroy(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.webgpuDevice&&(this.webgpuDevice.destroy(),this.webgpuDevice=null)}}let e=null;document.addEventListener("DOMContentLoaded",async()=>{try{e=new TwoWheelBotRL,await e.initialize()}catch(t){}}),window.addEventListener("beforeunload",()=>{e&&e.destroy()}),window.TwoWheelBotRL=TwoWheelBotRL;
//# sourceMappingURL=index-pu9YmMFh.js.map
